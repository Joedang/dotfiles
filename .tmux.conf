# ~~~ Version-specific commands [grumble, grumble] ~~~ #
# See: https://github.com/tmux/tmux/blob/master/CHANGES
run-shell "tmux setenv -g TMUX_VERSION $(tmux -V | cut -c 6-)"

if-shell -b '[ "$(echo "$TMUX_VERSION < 2.1" | bc)" = 1 ]' \
  "set -g mouse-select-pane on; set -g mode-mouse on; \
    set -g mouse-resize-pane on; set -g mouse-select-window on"

# In version 2.1 "mouse" replaced the previous 4 mouse options
if-shell -b '[ "$(echo "$TMUX_VERSION >= 2.1" | bc)" = 1 ]' \
  "set -g mouse on"

# UTF8 is autodetected in 2.2 onwards, but errors if explicitly set
if-shell -b '[ "$(echo "$TMUX_VERSION < 2.2" | bc)" = 1 ]' \
  "set -g utf8 on; set -g status-utf8 on; set -g mouse-utf8 on"
# ~~~ End of version-specific commands ~~~ #

bind - split-window -v -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"

# set -g mode-mouse on
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# select given pane number
# You can view the numbers with C-b q
# While those numbers are displayed, you can just press the number 
# to go to the pane. So, this binding is just for if you're slow.
bind-key O command-prompt 'select-pane -t:.%%'

# improve colors
set -g default-terminal 'screen-256color'

# highlight the current window's tab
set-window-option -g window-status-current-bg yellow

# highlight the active pane
set-option -g pane-active-border-style 'fg=black,bg=yellow'

# act like vim
setw -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# reload config without killing server
bind R source-file ~/.tmux.conf \; display-message "Config reloaded..."

# start window numbers at 1 to match keyboard order with tmux window order
set -g base-index 1
set-window-option -g pane-base-index 1

# increase scrollback lines
set -g history-limit 10000

# Status Bar
set -g status on
set -g status-right "%F_%R"
